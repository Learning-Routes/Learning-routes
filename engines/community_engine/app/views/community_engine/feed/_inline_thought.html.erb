<%# Inline floating thought — small circle that pops out to the side.
     Shows the featured comment for a shared route.
     Locals: shared_route %>
<%
  best = shared_route.best_comment
%>
<% if best %>
  <div data-controller="floating-thoughts"
       data-floating-thoughts-interval-value="8000"
       style="position:relative; margin-top:0.5rem; height:36px;">
    <div data-floating-thoughts-target="thought"
         style="position:absolute; left:0; top:0; opacity:0; transform:translateX(-8px);
                display:inline-flex; align-items:center; gap:0.5rem; max-width:100%;
                transition:opacity 0.5s ease, transform 0.5s ease;">
      <%# Circle avatar with speech indicator %>
      <div style="flex-shrink:0; width:30px; height:30px; border-radius:50%;
                  background:var(--color-accent, #2C261E); color:var(--color-accent-text, #F5F1EB);
                  display:flex; align-items:center; justify-content:center;
                  font-family:'DM Sans',sans-serif; font-size:0.6rem; font-weight:700;
                  box-shadow:0 2px 8px rgba(0,0,0,0.1);">
        <%= best.user&.name.to_s.first&.upcase || "?" %>
      </div>
      <%# Speech bubble popping to the right %>
      <div style="position:relative; background:var(--color-tint, rgba(28,24,18,0.05)); border-radius:10px;
                  padding:0.35rem 0.6rem; max-width:280px; border:1px solid var(--color-faint, rgba(28,24,18,0.06));">
        <%# Arrow pointing left toward circle %>
        <div style="position:absolute; left:-5px; top:50%; transform:translateY(-50%);
                    width:0; height:0; border-top:5px solid transparent; border-bottom:5px solid transparent;
                    border-right:5px solid var(--color-tint, rgba(28,24,18,0.05));"></div>
        <p style="font-family:'DM Sans',sans-serif; font-size:0.72rem; color:var(--color-sub, #6D665B);
                 line-height:1.35; margin:0; font-style:italic;
                 overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">
          "<%= best.body.truncate(60) %>"
        </p>
        <span style="font-family:'DM Mono',monospace; font-size:0.52rem; color:var(--color-muted, #887F72);">
          — <%= best.user&.name || "?" %>
        </span>
      </div>
    </div>
  </div>
<% end %>
