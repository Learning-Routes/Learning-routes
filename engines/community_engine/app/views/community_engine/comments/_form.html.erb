<% parent_id = local_assigns[:parent_id] %>
<div id="comment_form_<%= commentable.class.name.parameterize %>_<%= commentable.id %><%= parent_id ? "_reply_#{parent_id}" : '' %>">
  <%= form_with url: community_engine.comments_path, method: :post, class: "space-y-3" do |f| %>
    <div id="comment_form_errors"></div>

    <%= f.hidden_field :commentable_type, value: commentable.class.name %>
    <%= f.hidden_field :commentable_id, value: commentable.id %>
    <% if parent_id %>
      <%= f.hidden_field :parent_id, value: parent_id %>
    <% end %>

    <textarea name="comment[body]"
              placeholder="<%= parent_id ? t('community_engine.comments.reply_placeholder') : t('community_engine.comments.placeholder') %>"
              required
              rows="3"
              class="w-full px-4 py-3 rounded-[14px] bg-[#F5F1EB] border border-[#E0DBCF] text-sm text-[#1C1812] placeholder-[#9B9590] focus:outline-none focus:ring-2 focus:ring-[#2C261E]/20 focus:border-[#2C261E] resize-none"
              style="font-family: 'DM Sans', sans-serif;"></textarea>

    <div class="flex justify-end">
      <button type="submit"
              class="px-4 py-2 rounded-[11px] bg-[#2C261E] text-[#F5F1EB] text-sm font-medium hover:bg-[#3D3730] transition-colors"
              style="font-family: 'DM Sans', sans-serif;">
        <%= parent_id ? t("community_engine.comments.reply_btn") : t("community_engine.comments.submit_btn") %>
      </button>
    </div>
  <% end %>
</div>
