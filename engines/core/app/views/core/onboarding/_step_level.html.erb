<%= turbo_frame_tag "onboarding_step" do %>
  <div>
    <div class="text-center mb-8">
      <h2 class="text-2xl font-bold text-gray-900">What's your current level?</h2>
      <p class="mt-2 text-gray-600">This helps us personalize your learning path</p>
    </div>

    <%= form_with(url: core.onboarding_update_step_path(step: "level"), method: :patch, data: { turbo_frame: "onboarding_step" }) do |f| %>
      <div class="space-y-3 mb-8">
        <% [
          ["beginner", "Beginner", "I'm just starting out", "ðŸŒ±"],
          ["intermediate", "Intermediate", "I have some experience", "ðŸŒ¿"],
          ["advanced", "Advanced", "I want to master this topic", "ðŸŒ³"]
        ].each do |value, label, description, emoji| %>
          <label class="relative cursor-pointer block">
            <input type="radio" name="current_level" value="<%= value %>"
                   class="peer sr-only"
                   <%= "checked" if profile.current_level == value %>>
            <div class="flex items-center rounded-xl border-2 border-gray-200 p-5 transition
                        peer-checked:border-indigo-600 peer-checked:bg-indigo-50
                        hover:border-gray-300 hover:bg-gray-50">
              <span class="text-3xl mr-4"><%= emoji %></span>
              <div>
                <p class="text-base font-semibold text-gray-900"><%= label %></p>
                <p class="text-sm text-gray-500"><%= description %></p>
              </div>
            </div>
          </label>
        <% end %>
      </div>

      <div class="flex justify-between">
        <%= link_to "â† Back", core.onboarding_path(step: "interests"),
            class: "rounded-lg border border-gray-300 px-8 py-3 text-sm font-semibold text-gray-700 hover:bg-gray-50 transition",
            data: { turbo_frame: "onboarding_step" } %>
        <%= f.submit "Continue â†’",
            class: "rounded-lg bg-indigo-600 px-8 py-3 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition cursor-pointer" %>
      </div>
    <% end %>
  </div>
<% end %>
