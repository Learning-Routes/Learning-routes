<% content_for(:title, "Set up your profile - Learning Routes") %>

<div class="mx-auto w-full max-w-2xl" data-controller="onboarding">
  <!-- Top actions -->
  <div class="flex items-center justify-between mb-6">
    <%= link_to main_app.root_path, class: "text-sm text-gray-500 hover:text-gray-700 transition" do %>
      &larr; Back to home
    <% end %>
    <%= button_to "Sign out", core.sign_out_path, method: :delete,
        class: "text-sm text-gray-500 hover:text-gray-700 transition" %>
  </div>

  <!-- Progress bar -->
  <div class="mb-8">
    <div class="flex items-center justify-between mb-2">
      <span class="text-sm font-medium text-gray-700">Step <%= @step_number %> of <%= @total_steps %></span>
      <span class="text-sm text-gray-500"><%= (@step_number.to_f / @total_steps * 100).round %>% complete</span>
    </div>
    <div class="w-full bg-gray-200 rounded-full h-2">
      <div class="bg-indigo-600 h-2 rounded-full transition-all duration-500 ease-out"
           style="width: <%= (@step_number.to_f / @total_steps * 100).round %>%"></div>
    </div>
  </div>

  <!-- Wizard content (Turbo Frame) -->
  <div class="bg-white shadow-lg rounded-2xl p-8">
    <%= turbo_frame_tag "onboarding_step" do %>
      <%= render "core/onboarding/step_#{@step}", profile: @profile %>
    <% end %>
  </div>
</div>
