<% content_for(:title, t("auth.forgot.title")) %>

<% content_for(:auth_toggle) do %>
  <%= link_to core.sign_in_path,
      style: "font-family:'DM Sans',sans-serif; font-size:0.82rem; color:var(--color-muted, #A09889); text-decoration:none; transition:color 0.2s;",
      class: "nav-link" do %>
    <%= t("auth.forgot.toggle") %>
  <% end %>
<% end %>

<%# === Glassmorphic auth card === %>
<div class="auth-enter auth-card"
     data-controller="auth-form"
     data-auth-form-required-msg-value="<%= t('auth_alerts.validation_required') %>"
     data-auth-form-email-msg-value="<%= t('auth_alerts.validation_email') %>"
     data-auth-form-min-length-msg-value="<%= t('auth_alerts.validation_min_length') %>"
     style="width:100%; max-width:440px; padding:2.2rem 2rem;
            border-radius:20px;
            box-shadow:0 8px 32px rgba(28,24,18,0.06), 0 1px 3px rgba(28,24,18,0.03);">

  <%# === Heading === %>
  <h1 style="font-family:'DM Sans',sans-serif; font-weight:700; font-size:1.6rem; letter-spacing:-0.7px; color:var(--color-txt, #1C1812); margin:0 0 0.4rem; line-height:1.2;">
    <%= t("auth.forgot.heading") %>
  </h1>
  <p style="font-family:'DM Sans',sans-serif; font-size:0.82rem; color:var(--color-muted, #A09889); margin:0 0 1.4rem; line-height:1.5;">
    <%= t("auth.forgot.subtext") %>
  </p>

  <%# === Forgot password form === %>
  <%= form_with(url: core.forgot_password_path, method: :post) do |f| %>
    <div style="display:flex; flex-direction:column; gap:1rem;">

      <%# Email %>
      <div>
        <%= f.label :email, t("auth.forgot.email_label"),
            style: "display:block; font-family:'DM Sans',sans-serif; font-size:0.78rem; font-weight:500; color:var(--color-sub, #6D665B); margin-bottom:0.45rem;" %>
        <%= f.email_field :email,
            class: "auth-input",
            style: "display:block; width:100%; box-sizing:border-box; font-family:'DM Sans',sans-serif; font-size:0.92rem; padding:0.78rem 0.95rem; border-radius:10px; outline:none; transition:border-color 0.2s, box-shadow 0.2s;",
            placeholder: t("auth.forgot.email_placeholder"),
            required: true,
            autofocus: true,
            autocomplete: "email",
            data: { auth_form_target: "input", action: "focus->auth-form#inputFocus blur->auth-form#inputBlur" } %>
      </div>

      <%# Submit %>
      <div style="margin-top:0.3rem;">
        <%= f.submit t("auth.forgot.submit"),
            class: "auth-btn",
            style: "display:block; width:100%; font-family:'DM Sans',sans-serif; font-size:0.9rem; font-weight:600; padding:0.85rem 1rem; border-radius:11px; border:none; cursor:pointer; transition:all 0.2s; box-shadow:0 1px 3px rgba(28,24,18,0.12), 0 1px 2px rgba(28,24,18,0.06);",
            data: { auth_form_target: "submit", action: "mouseenter->auth-form#submitOver mouseleave->auth-form#submitOut" } %>
      </div>
    </div>
  <% end %>

  <%# === Back to login === %>
  <p style="text-align:center; margin:1.3rem 0 0; font-family:'DM Sans',sans-serif; font-size:0.78rem; color:var(--color-muted, #A09889);">
    <%= t("auth.forgot.switch_text") %>
    <%= link_to t("auth.forgot.switch_link"), core.sign_in_path,
        style: "color:var(--color-link, #8B6D28); text-decoration:none; font-weight:600;",
        data: { action: "mouseenter->auth-form#inlineLinkOver mouseleave->auth-form#inlineLinkOut" } %>
  </p>

</div>
