<%= turbo_stream.replace "exercise_feedback_#{@step.id}" do %>
  <div id="exercise_feedback_<%= @step.id %>">
    <% if @error %>
      <div class="bg-red-900/20 border border-red-700/30 rounded-xl p-4 text-sm text-red-300">
        <%= @error %>
      </div>
    <% else %>
      <div class="rounded-xl p-4 text-sm
                  <%= @grading_result['score'].to_f >= 70 ? 'bg-green-900/20 border border-green-700/30 text-green-300' : 'bg-orange-900/20 border border-orange-700/30 text-orange-300' %>">
        <div class="flex items-center gap-2 mb-2">
          <span class="font-semibold">Score: <%= @grading_result['score'] %>%</span>
        </div>
        <p><%= @grading_result['feedback'] %></p>
        <% if @grading_result['suggestions'] %>
          <p class="mt-2 text-xs opacity-75"><%= @grading_result['suggestions'] %></p>
        <% end %>
      </div>
    <% end %>
  </div>
<% end %>
