<div class="space-y-6">
  <!-- Step header -->
  <div>
    <span class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-blue-900/50 text-blue-300 mb-2">
      <%= t('learning_engine.lesson.badge') %>
    </span>
    <h1 class="text-2xl font-bold text-white"><%= @step.title %></h1>
    <p class="text-sm text-gray-400 mt-1"><%= @step.description %></p>
  </div>

  <% if @content_generating %>
    <%= render "loading_skeleton" %>
  <% elsif @content %>
    <!-- Rendered lesson content -->
    <div class="lesson-content" data-controller="math-renderer" data-math-renderer-target="content">
      <%= @rendered_html %>
    </div>

    <!-- AI interaction buttons -->
    <%= render "ai_buttons" %>

    <!-- Supplementary AI content area -->
    <div id="ai_supplementary_<%= @step.id %>" class="space-y-4"></div>
  <% else %>
    <div class="text-center py-12">
      <p class="text-gray-400"><%= t('learning_engine.lesson.no_content') %></p>
    </div>
  <% end %>
</div>
