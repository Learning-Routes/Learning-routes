<%#
  Expanded Route Overlay â€” full-screen dark visualization.
  Controlled by expanded_route_controller.js Stimulus controller.
  Rendered once; content populated dynamically via JS when a route card is clicked.
%>

<div data-expanded-route-target="overlay" role="dialog" aria-modal="true" aria-label="Route details"
     style="position:fixed; inset:0; z-index:1000; display:none; overflow:auto;">

  <%# Backdrop (click to close) %>
  <div data-expanded-route-target="backdrop"
       data-action="click->expanded-route#clickBackdrop"
       style="position:fixed; inset:0; background:rgba(28,25,18,0); transition:background 0.4s ease;">
  </div>

  <%# Content wrapper %>
  <div data-expanded-route-target="content"
       style="position:relative; z-index:1; min-height:100vh; display:flex; flex-direction:column; opacity:0; transform:translateY(-12px);">

    <%# Header %>
    <div style="padding:28px 40px 16px; display:flex; align-items:flex-start; justify-content:space-between; gap:1.5rem;">
      <div data-expanded-route-target="headerText" style="flex:1; min-width:0;">
        <%# Populated by JS %>
      </div>
      <button data-action="click->expanded-route#close"
              style="font-family:'DM Mono',monospace; font-size:0.68rem; font-weight:500; color:rgba(255,255,255,0.45); background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.08); border-radius:10px; padding:0.4rem 0.85rem; cursor:pointer; flex-shrink:0; transition:all 0.2s; white-space:nowrap;"
              class="overlay-close-btn">
        Close <span style="opacity:0.5;">esc</span>
      </button>
    </div>

    <%# SVG Visualization %>
    <div data-expanded-route-target="svgWrap"
         style="flex:1; padding:0 40px; min-height:380px;">
      <%# SVG built entirely by Stimulus controller %>
    </div>

    <%# Footer %>
    <div style="padding:20px 40px 28px; display:flex; align-items:center; flex-wrap:wrap; gap:0.5rem;">
      <div data-expanded-route-target="footerText" style="flex:1;">
        <%# Populated by JS %>
      </div>
      <a data-expanded-route-target="actionBtn" href="#"
         style="font-family:'DM Sans',sans-serif; font-size:0.78rem; font-weight:600; color:#1C1812; background:#E8E4DC; text-decoration:none; padding:0.5rem 1.4rem; border-radius:11px; transition:all 0.2s; white-space:nowrap; display:inline-flex; align-items:center; gap:0.4rem;"
         onmouseover="this.style.background='#F5F1EB'" onmouseout="this.style.background='#E8E4DC'">
        Open Route
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" aria-hidden="true">
          <path d="M5.25 3.5L8.75 7L5.25 10.5" stroke="#1C1812" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
    </div>

  </div>
</div>
