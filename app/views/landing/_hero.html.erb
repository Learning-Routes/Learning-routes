<style>
  .hero-grid {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: clamp(3rem, 7vw, 6rem);
  }
  .hero-left {
    flex: 1 1 440px;
    max-width: 580px;
  }
  .hero-right {
    flex-shrink: 0;
    width: 340px;
  }
  @media (max-width: 860px) {
    .hero-grid {
      flex-wrap: wrap;
    }
    .hero-left {
      flex-basis: 100%;
      max-width: 100%;
    }
    .hero-right {
      width: 100%;
      max-width: 340px;
    }
  }
</style>

<section class="pt-28 sm:pt-36 md:pt-48 pb-12 px-5 sm:px-8 max-w-[1200px] mx-auto min-h-[85vh] flex items-center">
  <div class="hero-grid w-full">

    <%# === LEFT COLUMN: Copy === %>
    <div class="hero-left">

      <%# Heading %>
      <h1 class="animate-enter delay-100
                 font-sans font-bold text-[clamp(3rem,6.5vw,4.6rem)]
                 tracking-[-3px] leading-[1.02] text-txt">
        <% if current_user && @active_route %>
          <%= t("hero.headline_active_html", topic: @active_route.localized_topic) %>
        <% else %>
          <%= t("hero.headline").html_safe %>
        <% end %>
      </h1>

      <%# Subtext %>
      <p class="animate-enter delay-200
                font-sans font-normal text-[1.1rem] text-sub
                leading-[1.9] max-w-[440px] mt-8">
        <% if current_user && @active_route %>
          <%= t("hero.subtext_active", progress: @active_route.progress_percentage, steps: @active_route.route_steps.count(&:completed?)) %>
        <% else %>
          <%= t("hero.subtext") %>
        <% end %>
      </p>

      <%# CTA Button %>
      <div class="animate-enter delay-300 mt-12">
        <% if current_user && @active_route %>
          <%= link_to dashboard_path,
              class: "inline-flex items-center justify-center
                      bg-accent text-accent-text font-sans text-[0.92rem] font-semibold
                      px-[2.2rem] py-[0.85rem] rounded-btn btn-shadow hover-lift
                      tracking-[-0.2px]" do %>
            <%= t("hero.cta_active") %>
          <% end %>
        <% else %>
          <a href="#how-it-works"
             class="inline-flex items-center justify-center
                    bg-accent text-accent-text font-sans text-[0.92rem] font-semibold
                    px-[2.2rem] py-[0.85rem] rounded-btn btn-shadow hover-lift
                    tracking-[-0.2px]">
            <%= t("hero.cta") %>
          </a>
        <% end %>
      </div>

      <%# Social Proof %>
      <div class="animate-enter delay-400 mt-[3rem] flex items-center gap-[0.8rem]" aria-label="4.8 out of 5 stars satisfaction rating in private beta">
        <div class="flex items-center gap-[0.3rem]" aria-hidden="true">
          <% 5.times do |i| %>
            <svg aria-hidden="true" width="15" height="15" viewBox="0 0 24 24" stroke-width="2">
              <% if i < 4 %>
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="#B09848" stroke="#B09848"/>
              <% else %>
                <defs><clipPath id="star-clip"><rect x="0" y="0" width="19.2" height="24"/></clipPath></defs>
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="#B09848" clip-path="url(#star-clip)"/>
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="none" stroke="#CCC5B8"/>
              <% end %>
            </svg>
          <% end %>
        </div>
        <span class="font-sans text-[0.78rem] text-muted">
          <%= t("hero.social_proof") %>
        </span>
      </div>
    </div>

    <%# === RIGHT COLUMN: Product Preview (dark card) === %>
    <div class="animate-enter delay-200 hero-right">
      <%= render "landing/product_preview" %>
    </div>

  </div>
</section>
